---
const navLinks = [
  { label: 'About', href: '#about' },
  { label: 'Menu', href: '#menu' },
  { label: 'Gallery', href: '#gallery' },
  { label: 'FAQ', href: '#faq' },
  { label: 'Visit', href: '#visit' },
];
---

<header id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-500" style="background: rgba(20, 20, 20, 0.45); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
  <div class="flex items-center justify-between px-6 sm:px-10 lg:px-14 py-6 lg:py-7">
    <!-- Left: Brand -->
    <a href="#home" class="z-40 shrink-0">
      <span class="nav-brand font-accent italic text-2xl sm:text-[1.7rem] tracking-wide transition-colors duration-300" style="color: #C9AF7C;">Wild Child</span>
    </a>

    <!-- Center: Desktop nav links -->
    <nav class="hidden lg:flex items-center gap-10 z-40" aria-label="Main navigation">
      {navLinks.map(link => (
        <a 
          href={link.href} 
          class="nav-link text-[11px] uppercase tracking-[0.2em] font-medium transition-colors duration-300 relative after:content-[''] after:absolute after:bottom-[-6px] after:left-0 after:w-0 after:h-[1px] after:transition-all after:duration-300 hover:after:w-full"
          style="color: rgba(201,175,124,0.75);"
          onmouseenter="this.style.color='#C9AF7C'; this.querySelector('::after');"
          onmouseleave="this.style.color='rgba(201,175,124,0.75)';"
        >
          {link.label}
        </a>
      ))}
    </nav>

    <!-- Right: CTA + Hamburger -->
    <div class="flex items-center gap-5 z-40 shrink-0">
      <a 
        href="https://wa.me/919321455199?text=Hi%20Wild%20Child!%20I'd%20like%20to%20reserve%20a%20table." 
        target="_blank" 
        rel="noopener noreferrer"
        class="nav-cta hidden sm:inline-flex text-[10px] font-medium uppercase tracking-[0.2em] px-6 py-3 transition-all duration-400"
        style="color: #C9AF7C; border: 1px solid rgba(201,175,124,0.4);"
        onmouseenter="this.style.backgroundColor='#C9AF7C'; this.style.borderColor='#C9AF7C'; this.style.color='#141414';"
        onmouseleave="this.style.backgroundColor='transparent'; this.style.borderColor='rgba(201,175,124,0.4)'; this.style.color='#C9AF7C';"
        id="nav-reserve-btn"
      >
        Reservations
      </a>

      <!-- Mobile hamburger -->
      <button 
        id="menu-toggle" 
        class="lg:hidden relative w-9 h-9 flex flex-col justify-center items-center gap-[6px] cursor-pointer group"
        aria-label="Toggle navigation menu"
        aria-expanded="false"
      >
        <span class="hamburger-line w-7 h-[1.5px] transition-all duration-300 origin-center" style="background-color: #C9AF7C;"></span>
        <span class="hamburger-line w-5 h-[1.5px] transition-all duration-300 origin-center group-hover:w-7" style="background-color: #C9AF7C;"></span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Overlay Menu -->
<div id="nav-overlay" class="fixed inset-0 z-40 bg-charcoal opacity-0 pointer-events-none transition-opacity duration-500 lg:hidden">
  <div class="flex flex-col items-center justify-center h-full gap-3">
    {navLinks.map((link, i) => (
      <a 
        href={link.href}
        class="nav-overlay-link font-accent italic text-cream text-display-lg hover:text-gold transition-colors duration-300 opacity-0 translate-y-4"
        style={`transition-delay: ${i * 80}ms;`}
      >
        {link.label}
      </a>
    ))}
    
    <div class="mt-8 opacity-0 translate-y-4 nav-overlay-link" style="transition-delay: 400ms;">
      <a 
        href="https://wa.me/919321455199?text=Hi%20Wild%20Child!%20I'd%20like%20to%20reserve." 
        target="_blank"
        rel="noopener noreferrer"
        class="btn btn-light text-[10px]"
      >
        Reserve a Table
      </a>
    </div>

    <div class="absolute bottom-10 left-0 right-0 flex justify-center gap-8 text-cream/30 text-[10px] uppercase tracking-[0.2em] opacity-0 translate-y-4 nav-overlay-link" style="transition-delay: 500ms;">
      <span>Samudram, Tamil Nadu</span>
      <a href="tel:+919321455199" class="hover:text-cream transition-colors">+91 93214 55199</a>
    </div>
  </div>
</div>

<script>
  const navbar = document.getElementById('navbar');
  const toggle = document.getElementById('menu-toggle');
  const overlay = document.getElementById('nav-overlay');
  const overlayLinks = document.querySelectorAll('.nav-overlay-link');
  const lines = toggle?.querySelectorAll('.hamburger-line');
  let isMenuOpen = false;

  const updateNavbar = () => {
    const scrolled = window.scrollY > 80;
    if (navbar && !isMenuOpen) {
      if (scrolled) {
        navbar.style.background = 'rgba(20, 20, 20, 0.92)';
        navbar.style.backdropFilter = 'blur(16px)';
        navbar.style.boxShadow = '0 1px 0 rgba(201,175,124,0.15)';
      } else {
        navbar.style.background = 'rgba(20, 20, 20, 0.45)';
        navbar.style.backdropFilter = 'blur(10px)';
        navbar.style.boxShadow = 'none';
      }
    }
  };

  window.addEventListener('scroll', updateNavbar, { passive: true });
  updateNavbar();

  // Smooth scroll with offset for fixed navbar
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', (e) => {
      const href = anchor.getAttribute('href');
      if (!href || href === '#') return;
      const target = document.querySelector(href);
      if (target) {
        e.preventDefault();
        const offset = 80;
        const top = target.getBoundingClientRect().top + window.scrollY - offset;
        window.scrollTo({ top, behavior: 'smooth' });
      }
    });
  });

  toggle?.addEventListener('click', () => {
    isMenuOpen = !isMenuOpen;
    toggle.setAttribute('aria-expanded', String(isMenuOpen));

    if (isMenuOpen) {
      overlay.classList.remove('pointer-events-none', 'opacity-0');
      overlay.classList.add('opacity-100');
      document.body.style.overflow = 'hidden';
      
      if (lines && lines.length >= 2) {
        lines[0].style.transform = 'rotate(45deg) translateY(4px)';
        lines[1].style.transform = 'rotate(-45deg) translateY(-4px)';
        lines[1].style.width = '1.75rem';
      }
      
      overlayLinks.forEach((link, i) => {
        setTimeout(() => {
          link.style.opacity = '1';
          link.style.transform = 'translateY(0)';
        }, 100 + i * 80);
      });
    } else {
      closeMenu();
    }
  });

  function closeMenu() {
    isMenuOpen = false;
    toggle?.setAttribute('aria-expanded', 'false');
    overlay?.classList.add('opacity-0', 'pointer-events-none');
    overlay?.classList.remove('opacity-100');
    document.body.style.overflow = '';
    
    if (lines && lines.length >= 2) {
      lines[0].style.transform = 'none';
      lines[1].style.transform = 'none';
      lines[1].style.width = '1.25rem';
    }
    
    overlayLinks.forEach(link => {
      link.style.opacity = '0';
      link.style.transform = 'translateY(1rem)';
    });
    
    updateNavbar();
  }

  overlayLinks.forEach(link => {
    if (link.tagName === 'A' && link.getAttribute('href')?.startsWith('#')) {
      link.addEventListener('click', () => closeMenu());
    }
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isMenuOpen) closeMenu();
  });
</script>
